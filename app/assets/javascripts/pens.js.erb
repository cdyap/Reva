$(document).ready(function(){
	$('#warning-piglets').fadeIn();
	$('#add-pens').addClass('disabled');
	$('#open').click(function(){
		$(".collapsible-header").addClass("active");
  		$(".collapsible").collapsible({accordion: false});
	});
	$('#close').click(function(){
		$(".collapsible-header").removeClass(function(){
    		return "active";
  		});
  		$(".collapsible").collapsible({accordion: true});
  		$(".collapsible").collapsible({accordion: false});
	});
	//http://codepen.io/jasonpaul/pen/NxjvjW

	$('#add-pens').click(function(){
		if (!($(this).hasClass("disabled"))){

			if ($('#buildings').val() == 0) {
				$('#warning-piglets').fadeIn();
				$(this).addClass('disabled');
			}
			else {
				totalPens = parseInt($('#buildings').val());
				for (x = 1; x < totalPens; x++) {
					// $('#add-pens').click();	
				}
				var pigNums = 1;
				var maleCounter = 1;
				var latest = parseInt($('#last-ear-notch').html());
				$('.nested-fields').each(function(){
					$(this).find('.litter_pigs_ear_notch_number input[type=number]').val(++latest);
					if (maleCounter <= parseInt($('#male-piglets').val())) {
						$(this).find('select').val("M");
						maleCounter++;
					} else {
						$(this).find('select').val("F");
					}
				});
				$('select').material_select();	
				$(this).addClass('disabled');
				$('#submit-litter').attr("disabled", false);
			}		
		}
		
	});
	$('#buildings').change(function(){
		$('#add-pens').removeClass('disabled');
		$('#warning-piglets').fadeOut();
	});

});
//DYNAMIC ADDING FOR DAILY LITTER
// var counter = 4;
// var limit = 20;
// function addInput(divName){
//      if (counter == limit)  {
//           alert("You have reached the limit of adding " + counter + " inputs");
//      }
//      else {
         
//           var dynamicdiv= document.createElement('div');
//           dynamicdiv.setAttribute("class", "col s3");
//           var div1 = document.createElement('div')
//           div1.setAttribute("class", "row");
//           div1.setAttribute("style", "margin-bottom:0px; margin-left:35px;");
//           div1.innerHTML = "<h6 class='grey-text'>Piglet" + (counter+1) +" </h6>";
//           var div2 = document.createElement('div');
//           div2.setAttribute("class", "col s4 input-field");
//           div2.innerHTML = "<input id='last_name' type='text' class='validate'>  <label for='last_name'>Sex</label>";
//           var div3 = document.createElement('div');
// 		  div3.setAttribute("class", "col s4 input-field");
//           div3.innerHTML = "<input id='last_name' type='text' class='validate'>  <label for='last_name'>Weight</label>";
//           dynamicdiv.appendChild(div1);
//           dynamicdiv.appendChild(div2);
//           dynamicdiv.appendChild(div3);
//           document.getElementById(divName).appendChild(dynamicdiv);
//           counter++;
//      }
// }

